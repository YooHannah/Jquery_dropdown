"use strict";!function(t){t.fn.Dropdown=function(e){this.each(function(){var e=t(this).hasClass("Multiple"),s=t(this).hasClass("Search"),a="",i="",l=[],n="<div class='ui-select-datalist'>",h='<a href="javascript:" class="ui-select-button _"><span class="ui-select-text">请选择</span><i class="ui-select-icon"></i></a>',c=t(this).attr("style");s&&(n+='<input type="" name="" class="ui-select-input">'),t(this).find("option").each(function(t){n+=0===t?"<a href='javascript:' class='ui-select-datalist-li selected' data-index='"+t+"' data-value='"+this.value+"' data-text='"+this.text+"'>"+this.text+"</a>":"<a href='javascript:' class='ui-select-datalist-li' data-index='"+t+"' data-value='"+this.value+"' data-text='"+this.text+"'>"+this.text+"</a>",l.push({value:this.value,text:this.text})}),n+="</div>",e?t(this).hide().after('<div class="ui-select Multiple" style="'+c+'">'+h+n+"<div>"):t(this).hide().after('<div class="ui-select" style="'+c+'">'+h+n+"<div>"),t(this).next().find(".ui-select-input").on("input",function(){for(var e=t(this)[0].value,s=t(this).nextAll(),a=0;a<s.length;a++)""!==t(s[a]).data("value")&&t(s[a]).css("display","block"),-1===t(s[a]).data("text").indexOf(e)&&t(s[a]).css("display","none")}),t(this).next().find("a._").on("click",function(){var s=t(this).next().find("a")[0];if(""===t(s).data("value")&&t(s).css("display","none"),t(this).parent().toggleClass("active"),!e&&t(this).parent().hasClass("active")&&(i=t(this).parents(".ui-select").prev()[0].value),e&&t(this).parent().hasClass("active")&&(a=t(this).parents(".ui-select").prev().data("value")),e&&!t(this).parent().hasClass("active")){var l=t(this).parents(".ui-select").prev().data("value"),n=!1;if(void 0===a||l.length!=a.length)n=!0;else for(var h=l.length,c=0;c<h-1;c++)if(l[c].value!=a[c].value){n=!0;break}n&&t(this).parents(".ui-select").prev().trigger("change")}}),t(this).next().find(".ui-select-datalist").on("mouseleave",function(s){var i=t(this).parent();t(document).on("mouseup",function(s){if(t(s.target).hasClass("ui-select-text"))t(this).off("mouseup");else{if(i.hasClass("active")&&i.toggleClass("active"),e){var l=i.prev().data("value"),n=!1;if(void 0===a||l.length!=a.length)n=!0;else for(var h=l.length,c=0;c<h-1;c++)if(l[c].value!=a[c].value){n=!0;break}n&&i.prev().trigger("change")}t(this).off("mouseup")}})}),t(this).next().find(".ui-select-datalist-li").on("click",function(){var s=t(this).parent().find("a");if(!e){var a=t(this)[0].dataset.index;s.each(function(e){e!=a&&t(this).removeClass("selected"),1===this.classList.length&&e==a&&t(this).addClass("selected")}),t(this).parents(".ui-select").find(".ui-select-text").text(t(this)[0].text),t(this).parents(".ui-select").removeClass("active"),t(this)[0].dataset.value!=i&&(t(this).parents(".ui-select").prev()[0].value=t(this)[0].dataset.value,t(this).parents(".ui-select").prev().trigger("change"))}if(e){var l="",n=[];t(this).toggleClass("selected"),s.each(function(e){t(this).hasClass("selected")&&0!=e&&(n.push({value:t(this).data("value"),text:t(this).data("text")}),l=1==n.length?t(this).data("text"):l+"、"+t(this).data("text"))}),t(this).parents(".ui-select").find(".ui-select-text").text(l),t(this).parents(".ui-select").prev().data("value",n)}})})}}(window.jQuery);